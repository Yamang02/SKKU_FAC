<section class="exhibition-container">
    <header class="exhibition-header">
        <h1 class="exhibition-title">전시회 목록</h1>
    </header>

    <!-- 검색 섹션 -->
    <section class="search-container">
        <form class="search-form" id="searchForm" method="get" action="">
            <div class="search-layout">
                <div class="search-column keyword-column">
                    <label for="keyword" class="form-label">전시회 검색</label>
                    <div class="search-input-wrapper">
                        <input type="text" id="keyword" name="keyword" class="search-input"
                            placeholder="전시회명, 작가명, 키워드 등을 입력하세요">
                        <button type="submit" class="search-button">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                viewBox="0 0 16 16">
                                <path
                                    d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="search-filters">
                    <div class="search-column">
                        <label for="filter-type" class="form-label">전시회 유형</label>
                        <select id="filter-type" name="type" class="form-select">
                            <option value="all">모든 전시회</option>
                            <option value="regular">정기 전시회</option>
                            <option value="special">특별 전시회</option>
                        </select>
                    </div>

                    <div class="search-column">
                        <label for="filter-year" class="form-label">개최 연도</label>
                        <select id="filter-year" name="year" class="form-select">
                            <option value="all">전체</option>
                            <option value="2023">2023</option>
                            <option value="2022">2022</option>
                            <option value="2021">2021</option>
                        </select>
                    </div>

                    <div class="search-column">
                        <label for="filter-category" class="form-label">카테고리</label>
                        <select id="filter-category" name="category" class="form-select">
                            <option value="all">모든 카테고리</option>
                            <option value="painting">회화</option>
                            <option value="sculpture">조각</option>
                            <option value="photography">사진</option>
                            <option value="digital">디지털 아트</option>
                        </select>
                    </div>

                    <div class="search-column">
                        <label for="sort-option" class="form-label">정렬 기준</label>
                        <select id="sort-option" name="sort" class="form-select">
                            <option value="date-desc">최신순</option>
                            <option value="date-asc">오래된순</option>
                            <option value="title-asc">제목 오름차순</option>
                            <option value="title-desc">제목 내림차순</option>
                        </select>
                    </div>
                </div>

                <div class="search-buttons">
                    <button type="submit" class="btn-search">검색</button>
                    <button type="reset" class="btn-reset">초기화</button>
                </div>
            </div>
        </form>
    </section>

    <!-- 필터 태그 표시 영역 -->
    <div id="active-filters" class="filter-list">
        <!-- 활성화된 필터가 여기에 표시됩니다 -->
    </div>

    <!-- 결과 카운트 -->
    <div class="result-header">
        <div class="result-count">
            <p id="exhibition-count">총 <strong>
                    <%= exhibitions.length %>
                </strong>개의 전시회가 검색되었습니다.</p>
        </div>
    </div>

    <!-- 전시회 그리드 -->
    <div class="exhibition-grid" id="exhibitions-container">
        <% exhibitions.forEach(exhibition=> { %>
            <div class="exhibition-card" data-exhibition-id="<%= exhibition.id %>"
                data-start-date="<%= exhibition.startDate %>" data-end-date="<%= exhibition.endDate %>"
                data-location="<%= exhibition.location %>" data-description="<%= exhibition.description %>"
                data-artists="<%= exhibition.artists ? exhibition.artists.join(',') : '' %>"
                data-viewing-hours="<%= exhibition.viewingHours || '10:00 - 18:00' %>"
                data-admission="<%= exhibition.admission || '무료' %>"
                data-category="<%= exhibition.category || 'uncategorized' %>"
                data-exhibition-type="<%= exhibition.exhibitionType || 'regular' %>">

                <div class="card-image-container">
                    <img src="<%= exhibition.image || '/images/exhibition-placeholder.svg' %>"
                        alt="<%= exhibition.title %>" class="exhibition-image"
                        onerror="this.onerror=null; this.src='/images/exhibition-placeholder.svg';">
                    <!-- 전시 유형 표시 (정기/특별) -->
                    <span class="exhibition-type <%= exhibition.exhibitionType || 'regular' %>">
                        <%= exhibition.exhibitionType==='special' ? '특별' : '정기' %>
                    </span>
                </div>

                <div class="exhibition-info">
                    <h2 class="exhibition-title">
                        <%= exhibition.title %>
                    </h2>
                    <% if (exhibition.subtitle) { %>
                        <p class="exhibition-subtitle">
                            <%= exhibition.subtitle %>
                        </p>
                        <% } %>
                            <p class="exhibition-date">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                    viewBox="0 0 16 16">
                                    <path
                                        d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z" />
                                </svg>
                                <%= exhibition.startDate %> ~ <%= exhibition.endDate %>
                            </p>
                            <% if (exhibition.category) { %>
                                <span class="exhibition-category">
                                    <%= exhibition.category %>
                                </span>
                                <% } %>
                </div>
            </div>
            <% }); %>
    </div>

    <!-- 로딩 인디케이터 -->
    <div id="loading-indicator" class="loading-indicator" style="display: none;">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
            <path
                d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.25-14.75A.75.75 0 0 1 9 2v1.25a.75.75 0 0 1-1.5 0V2a.75.75 0 0 1 .75-.75zM12.9 4.1a.75.75 0 0 1 0 1.06l-.884.883a.75.75 0 1 1-1.06-1.06l.883-.884a.75.75 0 0 1 1.06 0zm-1.06 7.07a.75.75 0 0 1 1.06 0l.884.883a.75.75 0 1 1-1.06 1.06l-.884-.883a.75.75 0 0 1 0-1.06zM2.75 8a.75.75 0 0 1 .75-.75h1.25a.75.75 0 0 1 0 1.5H3.5a.75.75 0 0 1-.75-.75zm10.5 0a.75.75 0 0 1 .75-.75h1.25a.75.75 0 0 1 0 1.5h-1.25a.75.75 0 0 1-.75-.75zM3.1 4.1a.75.75 0 0 1 1.06 0l.884.883a.75.75 0 1 1-1.06 1.06L3.1 5.16a.75.75 0 0 1 0-1.06zm7.07 7.07a.75.75 0 0 1 0 1.06l-.883.884a.75.75 0 1 1-1.06-1.06l.883-.884a.75.75 0 0 1 1.06 0zM8 13.25a.75.75 0 0 1 .75.75v1.25a.75.75 0 0 1-1.5 0V14a.75.75 0 0 1 .75-.75z" />
        </svg>
        <span>로딩 중...</span>
    </div>

    <!-- 결과 없음 메시지 -->
    <div id="no-results" class="no-result" style="display: none;">
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" viewBox="0 0 16 16">
            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
            <path
                d="M4.285 12.433a.5.5 0 0 0 .683-.183A3.498 3.498 0 0 1 8 10.5c1.295 0 2.426.703 3.032 1.75a.5.5 0 0 0 .866-.5A4.498 4.498 0 0 0 8 9.5a4.5 4.5 0 0 0-3.898 2.25.5.5 0 0 0 .183.683zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5z" />
        </svg>
        <p>검색 결과가 없습니다.</p>
        <button id="reset-search" class="reset-button">검색 초기화</button>
    </div>
</section>

<script src="/js/page/exhibition/ExhibitionList.js"></script>
