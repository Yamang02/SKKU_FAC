<!DOCTYPE html>
<html lang="ko">

    <head>
        <%- include('../common/head', { pageTitle: '공지사항 - SKKU 순수미술동아리 갤러리' , additionalStyles:
            ['/css/notice/NoticeList.css'] }) %>
    </head>

    <body>
        <%- include('../common/header') %>

            <main class="main-content">
                <div class="container">
                    <!-- 페이지 헤더 -->
                    <header class="page-header">
                        <h1 class="page-title">공지사항</h1>
                        <p class="page-description">성균관대학교 미술학과의 소식과 공지사항을 확인하세요.</p>
                    </header>

                    <!-- 결과 컨트롤 섹션 -->
                    <section class="results-control">
                        <div class="results-info">
                            <p>총 <strong>
                                    <%= notices ? notices.length : 0 %>
                                </strong>개의 공지사항이 있습니다.</p>
                        </div>
                        <form class="search-form" method="get" action="">
                            <div class="search-controls">
                                <div class="search-type">
                                    <select name="searchType" class="search-select">
                                        <option value="all" <%=searchType==='all' ? 'selected' : '' %>>제목+내용</option>
                                        <option value="title" <%=searchType==='title' ? 'selected' : '' %>>제목</option>
                                        <option value="author" <%=searchType==='author' ? 'selected' : '' %>>작성자
                                        </option>
                                    </select>
                                </div>
                                <div class="search-input-wrapper">
                                    <input type="text" name="keyword" class="search-input" placeholder="검색어를 입력하세요"
                                        value="<%= locals.keyword || '' %>">
                                    <button type="submit" class="search-button search-button--submit" title="검색">
                                        <i class="fas fa-search"></i>
                                    </button>
                                    <button type="reset" class="search-button search-button--reset" title="초기화">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </section>

                    <!-- 공지사항 목록 -->
                    <section class="notice-list-section">
                        <div class="notice-list">
                            <% if (notices && notices.length> 0) { %>
                                <% notices.forEach(notice=> { %>
                                    <article class="notice-item">
                                        <a href="/notice/<%= notice.id %>" class="notice-link">
                                            <div class="notice-thumbnail">
                                                <% if (notice.image_url) { %>
                                                    <img src="<%= notice.image_url %>" alt="<%= notice.title %> 이미지">
                                                    <% } else { %>
                                                        <div class="notice-thumbnail-placeholder">
                                                            <i class="fas fa-newspaper"></i>
                                                        </div>
                                                        <% } %>
                                            </div>
                                            <div class="notice-content">
                                                <% if (notice.is_important) { %>
                                                    <span class="notice-badge important">중요</span>
                                                    <% } %>
                                                        <h3 class="notice-title">
                                                            <%= notice.title %>
                                                        </h3>
                                                        <p class="notice-excerpt">
                                                            <%= notice.content %>
                                                        </p>
                                                        <div class="notice-meta">
                                                            <span class="notice-date">
                                                                <%= notice.created_at %>
                                                            </span>
                                                            <span class="notice-author">
                                                                <%= notice.author %>
                                                            </span>
                                                            <span class="notice-views">조회 <%= notice.views %></span>
                                                        </div>
                                            </div>
                                        </a>
                                    </article>
                                    <% }); %>
                                        <% } else { %>
                                            <div class="no-results">
                                                <p>등록된 공지사항이 없습니다.</p>
                                            </div>
                                            <% } %>
                        </div>

                        <!-- 페이지네이션 -->
                        <div class="notice-pagination">
                            <%- include('../common/pagination', { pagination: pagination, baseUrl: '?keyword=' +
                                (keyword || '' ) + '&page=' }) %>
                        </div>
                    </section>
                </div>
            </main>

            <%- include('../common/footer') %>
                <script src="/js/page/notice/NoticeList.js"></script>

    </body>

</html>
