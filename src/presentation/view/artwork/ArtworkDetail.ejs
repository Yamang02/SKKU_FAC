<!DOCTYPE html>
<html lang="ko">

    <head>
        <% const pageTitle=`${artwork.title} - SKKU 순수미술동아리 갤러리`; const
            additionalStyles=['/css/artwork/ArtworkDetail.css']; %>
            <%- include('../common/head', { pageTitle, additionalStyles }) %>
    </head>

    <body>
        <%- include('../common/header') %>

            <main class="artwork-detail-page">
                <div class="artwork-detail-container">
                    <!-- 작품 이미지 섹션 -->
                    <section class="artwork-image-section">
                        <div class="artwork-image-wrapper">
                            <img src="<%= artwork.image %>" alt="<%= artwork.title %>" class="artwork-main-image">
                        </div>
                    </section>

                    <!-- 작품 정보 섹션 -->
                    <section class="artwork-info-section">
                        <div class="artwork-detail-header">
                            <h1 class="artwork-detail-title">
                                <%= artwork.title %>
                            </h1>
                            <p class="artwork-detail-artist">
                                <%= artwork.artist %>
                            </p>
                            <p class="artwork-detail-department">
                                <%= artwork.department %>
                            </p>
                        </div>

                        <div class="artwork-details">
                            <div class="detail-group">
                                <h2><i class="fas fa-info-circle icon-margin"></i>작품 정보</h2>
                                <div class="detail-item">
                                    <span class="label">제작 연도</span>
                                    <span class="value">
                                        <%= artwork.year %>
                                    </span>
                                </div>
                                <div class="detail-item">
                                    <span class="label">매체</span>
                                    <span class="value">
                                        <%= artwork.medium %>
                                    </span>
                                </div>
                                <div class="detail-item">
                                    <span class="label">크기</span>
                                    <span class="value">
                                        <%= artwork.size %>
                                    </span>
                                </div>
                            </div>

                            <div class="detail-group">
                                <h2><i class="fas fa-align-left icon-margin"></i>작품 설명</h2>
                                <p class="artwork-description">
                                    <%= artwork.description %>
                                </p>
                            </div>

                            <div class="detail-group">
                                <h2><i class="fas fa-calendar-alt icon-margin"></i>전시 정보</h2>
                                <p class="exhibition-info">
                                    <%= artwork.exhibition %>
                                </p>
                            </div>
                        </div>
                    </section>
                </div>

                <!-- 댓글 섹션 -->
                <div class="comments-container">
                    <div class="comments">
                        <div class="comments__header">
                            <h2 class="comments__title">댓글</h2>
                            <span class="comments__count">총 <%= commentPagination.totalComments %>개의 댓글</span>
                        </div>

                        <form class="comment-form">
                            <div class="comment-form__input-wrapper">
                                <textarea class="comment-form__input" placeholder="댓글을 작성해주세요..."></textarea>
                                <div class="comment-form__actions">
                                    <button type="button" class="btn btn--comment btn--comment-clear btn--delete"
                                        aria-label="댓글 내용 초기화">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                    <button type="submit" class="btn btn--comment btn--comment-submit"
                                        aria-label="댓글 작성">
                                        <i class="fas fa-paper-plane"></i>
                                    </button>
                                </div>
                            </div>
                        </form>

                        <div class="comments__list">
                            <% if (comments && comments.length> 0) { %>
                                <% comments.forEach(comment=> { %>
                                    <div class="comment">
                                        <div class="comment__actions">
                                            <button class="btn btn--action" data-comment-id="<%= comment.id %>"
                                                title="댓글 수정">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn btn--action btn--delete"
                                                data-comment-id="<%= comment.id %>" title="댓글 삭제">
                                                <i class="fas fa-trash-alt"></i>
                                            </button>
                                        </div>
                                        <div class="comment__author">
                                            <%= comment.author %>
                                        </div>
                                        <div class="comment__date">
                                            <%= comment.formattedDate %>
                                        </div>
                                        <div class="comment__content">
                                            <%= comment.content %>
                                        </div>
                                    </div>
                                    <% }); %>
                                        <% } else { %>
                                            <div class="comments__empty">
                                                <p>아직 댓글이 없습니다. 첫 댓글을 작성해보세요!</p>
                                            </div>
                                            <% } %>
                        </div>

                        <div class="comments__pagination">
                            <%- include('../common/pagination', { pagination: commentPagination,
                                baseUrl: '?commentPage=' }) %>
                        </div>
                    </div>
                </div>

                <!-- 관련 작품 섹션 -->
                <div class="related-artworks-wrapper">
                    <div class="related-artworks">
                        <div class="related-artworks-container">
                            <div class="related-artworks-header">
                                <h2 class="related-artworks-title">다른 작품</h2>
                            </div>
                            <div class="related-artworks-list">
                                <% if (relatedArtworks && relatedArtworks.length> 0) { %>
                                    <% relatedArtworks.forEach(relatedArtwork=> { %>
                                        <div class="card card--related">
                                            <a href="/artwork/<%= relatedArtwork.id %>" class="card__link">
                                                <% if (relatedArtwork.image) { %>
                                                    <div class="card__image-container">
                                                        <img src="<%= relatedArtwork.image %>"
                                                            alt="<%= relatedArtwork.title || '작품 이미지' %>"
                                                            class="card__image"
                                                            onerror="this.onerror=null; this.src='/images/default-artwork.svg'">
                                                    </div>
                                                    <% } else { %>
                                                        <div class="card__image-placeholder">
                                                            <img src="/images/default-artwork.svg"
                                                                alt="<%= relatedArtwork.title || '작품 이미지' %>"
                                                                class="card__image">
                                                        </div>
                                                        <% } %>
                                                            <div class="card__info">
                                                                <h3 class="card__title">
                                                                    <%= relatedArtwork.title || '제목 없음' %>
                                                                </h3>
                                                                <p class="card__subtitle">
                                                                    <%= relatedArtwork.artist || '작가 미상' %>
                                                                </p>
                                                                <div class="card__meta">
                                                                    <%= relatedArtwork.department || '' %>
                                                                </div>
                                                            </div>
                                            </a>
                                        </div>
                                        <% }); %>
                                            <% } else { %>
                                                <div class="empty-state">
                                                    <i class="fas fa-image"></i>
                                                    <p>관련된 다른 작품이 없습니다.</p>
                                                </div>
                                                <% } %>
                            </div>
                            <div class="list-action">
                                <div class="action-group">
                                    <button class="btn btn--round btn--scroll" aria-label="이전 작품">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <a href="/artwork" class="btn btn--round btn--list">
                                        <i class="fas fa-th-large"></i>
                                        <span>작품 목록</span>
                                    </a>
                                    <button class="btn btn--round btn--scroll" aria-label="다음 작품">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>

            <%- include('../common/footer') %>

                <!-- 외부 스크립트 파일 로드 -->
                <script src="/js/page/artwork/ArtworkDetail.js"></script>
    </body>

</html>
